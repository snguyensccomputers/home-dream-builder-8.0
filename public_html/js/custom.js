var ajax_url = window.location.protocol + '//' + window.location.host;$(document).ready(function(){    vhInSafari();    $('.dropdown-toggle').click(function(e){        e.preventDefault();    });    $(".phone-num").inputmask({"mask": "(999) 999-9999"});    $('.tooltipster.bottom').tooltipster({        contentCloning: true,        side: ['bottom', 'top'],        theme: 'tooltipster-borderless',        interactive: true,        delay: 50,        maxWidth: 900,        zIndex: 201    });    $('.tooltipster.right').tooltipster({        contentCloning: true,        side: ['right', 'left'],        theme: 'tooltipster-borderless',        interactive: true,        delay: 50,        maxWidth: 900,        zIndex: 201    });    /* =============== Application Form =============== */    /* ---------- More Thoughts ---------- */    $('#application form > section a[href=#more-thoughts]').click(function(){        var moreThoughtsElem = $(this).next('.more-thoughts');        var pros = moreThoughtsElem.find('.pros-statement').html().trim();        var cons = moreThoughtsElem.find('.cons-statement').html().trim();        var lifeHack = moreThoughtsElem.find('.life-hack-statement').html().trim();        var moreThoughtsModalBody = $('#more-thoughts-modal').find('.modal-body');        moreThoughtsModalBody.find('#pros').find('div').html((pros != '') ? pros : '<p>N/A</p>');        moreThoughtsModalBody.find('#cons').find('div').html((cons != '') ? cons : '<p>N/A</p>');        moreThoughtsModalBody.find('#life-hack').find('div').html((lifeHack != '') ? lifeHack : '<p>N/A</p>');        var question = $(this).closest('section').find('h2').text();        moreThoughtsModalBody.find('h3').text(question);    });    /* ---------- Home Features List ---------- */    $('#home-features-list ul > li > a,#home-features-list ul > li.megamenu > ul > li > a').click(function(e){        e.preventDefault();        $('#home-features-list ul li > a, #home-features-list ul li.megamenu > .megamenu-title').removeClass('active');        $(this).addClass('active');        if ($(this).closest('ul').closest('li').hasClass('megamenu')) {            $(this).closest('ul').closest('li').find('.megamenu-title').addClass('active');        }    });    $('#home-features-list ul > li.megamenu > .megamenu-title').click(function(e){        e.preventDefault();        var megamenu = $(this).closest('.megamenu').find('ul');        if (megamenu.hasClass('collapsed')) {            $(this).removeClass('has-collapsed');            megamenu.removeClass('collapsed');            $(this).find('span.collapse-symbol').html('&#9660;');            megamenu.slideUp(800);        }        else {            $(this).addClass('has-collapsed');            megamenu.addClass('collapsed');            $(this).find('span.collapse-symbol').html('&#9650;');            megamenu.slideDown(800);        }    });    /* ---------- Sliders ---------- */    initializeSlider('asking-price', [[80000, 200000, 10000], [200000, 500000, 25000], [500000, 1000000, 100000]], true);    initializeSlider('monthly-payment', [[500, 1500, 100], [1500, 5000, 250]], true);    initializeSlider('current-amount', [[0, 1000, 10000], [10000, 35000, 2500], [35000, 85000, 5000]], true);    initializeSlider('approx-sq-ft-home', [[500, 2000, 1000], [1000, 6000, 250]]);    initializeSlider('lot-size-slide', [[7000, 15000, 1000], [15000, 35000, 2500], [35000, 135000, 10000]]);    initializeSlider('year-built', [[1900, 2020, 10]], false, false);    /* ---------- Dwelling Type ---------- */    $('#dwelling-types .property-img > img').click(function(e){        if ($(this).hasClass('selected')) {            $(this).removeClass('selected');        }        else {            $(this).addClass('selected');        }        var properties = [];        $(this).closest('section').find('.row').find('.col-md-4').each(function(){            var property = $(this).find('.property-img').find('img');            if (property.hasClass('selected')) {                properties.push(property.attr('alt'));            }        });        $('input[name=dwelling-types]').val(properties.join());    });    /* ---------- Dwelling Style ---------- */    $('input[name=dwelling-style]').bind('change', function () {        var dwellingStyles = [];        $('#dwelling-styles .checkbox-btns > .checkbox-btn').each(function(){            var dwellingStyle = $(this).find('input[type=checkbox]');            if (dwellingStyle.is(':checked')) {                dwellingStyles.push(dwellingStyle.val());            }        });        $('input[name=dwelling-styles]').val(dwellingStyles.join());    });    /* ---------- Zip Code ---------- */    $('input[name=zipcode]').keydown(function(e){        if (e.keyCode == 32)            return false;    });    /* ---------- Parking Features ---------- */    // $('#garage-spaces .square-img > img').click(function(e){    //     if ($(this).hasClass('selected')) {    //         $(this).removeClass('selected');    //         $('input[name=garage-spaces]').val('');    //     }    //     else {    //         $('.square-img > img').removeClass('selected');    //         $(this).addClass('selected');    //         $('input[name=garage-spaces]').val($(this).attr('alt'));    //     }    // });    /* ---------- Phone Number ---------- */    $('input[name=first-num],input[name=second-num]').keyup(function(){        if ($(this).val().length == $(this).attr('maxlength')) {            var phoneNumber = $(this).closest('.phone-number').next().next();            if (phoneNumber.hasClass('phone-number')) {                phoneNumber.find('input').focus();            }        }    });        $('input[name=no-schedule-call]').click(function(){        var phoneInput = $('#phone .phone-number input');        if ($(this).is(':checked')) {            phoneInput.val('');            phoneInput.prop('disabled', true);            $('#phone-error').remove();            $('#incorrect-phone-error').remove();        }        else {            phoneInput.prop('disabled', false);        }    });    // $('#top-10-table-container').css('height', (($(window).width() > 1199) ? $('#form-table-container').height() + 'px' : 'auto'));    // console.log($('#form-table-container').offset().top);});$(window).resize(function(){    vhInSafari();    if (window.location.pathname.indexOf('ready-to-dream') != -1) {        var windowWidth = $(window).width();        var scrollTop = $(window).scrollTop();        var top10Table = $('#top-10-table');        $('#top-10-table-container').css('height', ((windowWidth > 1199) ? $('#form-table-container').height() + 'px' : 'auto'));        var formTable = $('#form-table');        if ((scrollTop >= formTable.offset().top && scrollTop <= 3629) && windowWidth >= 1199) {            top10Table.css('position', 'fixed');            top10Table.css('top', '80px');            top10Table.css('width', '270px');        }        else if (scrollTop > 3629 && windowWidth >= 1199) {            top10Table.css('position', 'absolute');            top10Table.css('top', 'unset');            top10Table.css('bottom', '0');            top10Table.css('width', '270px');        }        else {            top10Table.css('position', 'relative');            top10Table.css('top', '0');            top10Table.css('width', 'unset');        }    }});$(window).on('scroll', function() {    if (window.location.pathname.indexOf('ready-to-dream') != -1) {        var windowWidth = $(window).width();        var scrollTop = $(window).scrollTop();        var top10Table = $('#top-10-table');        var formTableOffsetTop = $('#form-table').offset().top;        //console.log(scrollTop, formTableOffsetTop);        if ((scrollTop >= formTableOffsetTop && scrollTop <= 3641) && windowWidth >= 1199) {            top10Table.css('position', 'fixed');            top10Table.css('top', '80px');            top10Table.css('width', '270px');        }        else if (scrollTop > 3641 && windowWidth >= 1199) {            top10Table.css('position', 'absolute');            top10Table.css('top', 'unset');            top10Table.css('bottom', '0');        }        else {            top10Table.css('position', 'relative');            top10Table.css('top', '0');            top10Table.css('width', 'unset');        }    }});var windowHeight = $(window).height();function vhInSafari() {    if (/Safari/i.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor) && !/Mobi|Android/i.test(navigator.userAgent)) {        $('#content .bg-img').css('min-height', ($(window).height() - 160 - 74) + 'px');        $('#application').css('min-height', (windowHeight - 97 - 74) + 'px');    }}function getParameterByName(name, url) {    if (!url) url = window.location.href;    name = name.replace(/[\[\]]/g, '\\$&');    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),        results = regex.exec(url);    if (!results) return null;    if (!results[2]) return '';    return decodeURIComponent(results[2].replace(/\+/g, ' '));}function commaSeparateNumber(val){    while (/(\d+)(\d{3})/.test(val.toString())){        val = val.toString().replace(/(\d+)(\d{3})/, '$1'+','+'$2');    }    return val;}function initializeSlider(sectionId, arrOfRanges, isCurrency = false, addComma = true) {    $('#' + sectionId + '-slider').change(function(){        var sliderRange = getSliderRangeValues(arrOfRanges, isCurrency, addComma);        var status = $('input[name=status]');        var index;        if (status.val() == 'initializing') {            var currentIndexPrice = 0;            $.each(sliderRange, function(i, value){                if (value == $('input[name=' + sectionId + ']').val()) {                    currentIndexPrice = i;                    return false;                }            });            index = currentIndexPrice;            setTimeout(function(){                $('#' + sectionId + '-slider').slider('setValue', currentIndexPrice);            }, 100);            if (sectionId == 'year-built') {                if ($('form[name=ready-to-dream-form] section.active').attr('id') == 'review')                    status.val('review');                else                    status.val('in-progress');            }        }        else {            index = $('#' + sectionId + ' .slider.slider-horizontal .tooltip-inner').html();        }        var selectedValue = sliderRange[index];        $(this).closest('#' + sectionId).find('.slider-value > span').html(selectedValue);        $('input[name=' + sectionId + ']').val(selectedValue);    });}function getSliderRangeValues(arrOfRanges, isCurrency, addComma) {    var sliderRangeValues = [];    $.each(arrOfRanges, function(r, range){        var startPrice = range[0];        var endPrice = range[1];        var incrementalPrice = range[2];        if (arrOfRanges.length == r + 1) {            for (var i = startPrice; i <= endPrice; i += incrementalPrice) {                sliderRangeValues.push(((isCurrency) ? '$' : '') + ((addComma) ? commaSeparateNumber(i) : i) + ((i == endPrice) ? '+' : ''));            }        }        else {            for (var i = startPrice; i < endPrice; i += incrementalPrice) {                sliderRangeValues.push(((isCurrency) ? '$' : '') + ((addComma) ? commaSeparateNumber(i) : i));            }        }    });    // console.log(sliderRangeValues.length);    return sliderRangeValues;}!function (i, n, d, o) {    d(function () {        d("[data-ui-slider]").slider()    })}(window, document, window.jQuery);